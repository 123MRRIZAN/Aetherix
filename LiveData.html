<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aetherix - Live Data</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Arial; background:#e0f7fa; color:#003366; margin:0; padding:0; }
header { background:#009688; color:white; padding:20px; text-align:center; }
nav { background:#004d40; display:flex; justify-content:center; }
nav a { color:white; padding:15px 25px; text-decoration:none; }
nav a:hover { background:#00796b; }
section { padding:30px; text-align:center; }
input { padding:5px; width:150px; margin:5px; }
button { padding:10px 20px; background:#009688; color:white; border:none; cursor:pointer; margin-top:10px; }
button:hover { background:#00796b; }
canvas { margin-top:20px; }
</style>
</head>
<body>
<header><h1>Live Weather Data</h1></header>
<nav>
<a href="Home.html">Home</a><a href="Carbon.html">Carbon Calculator</a><a href="LiveData.html">Live Data</a><a href="AISolutions.html">AI Solutions</a><a href="Personalize.html">Personalize</a><a href="Chat.html">Chat</a><a href="FaceID.html">Face ID</a><a href="News.html">News</a><a href="About.html">About</a><a href="Maths.html">Maths</a>
</nav>
<section>
<h2>Check Weather</h2>
<input type="text" id="city" placeholder="Enter City">
<button onclick="getWeather()">Get Weather</button>
<p id="weather"></p>
<canvas id="weatherChart" width="400" height="400"></canvas>
<br>
<button onclick="downloadWeatherPNG()">Download Graph</button>
</section>

<script>
    
    const apiKey = 'c4e702afaf461f9258279cb7c3eb0c4d';

async function getWeather() {
    const city = document.getElementById('city').value;
    const res = await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`);
    const data = await res.json();
    if(data.cod !== "200" && data.cod !== 200) { alert("City not found!"); return; }

    let labels = [];
    let temps = [];
    data.list.slice(0,8).forEach(item => { labels.push(item.dt_txt.split(' ')[1]); temps.push(item.main.temp); });

    document.getElementById('weather').innerText = `Current Temp: ${temps[0]}°C`;

    if(window.weatherChart) window.weatherChart.destroy();
    const ctx = document.getElementById('weatherChart').getContext('2d');
    window.weatherChart = new Chart(ctx, {
        type:'line',
        data: { labels:labels, datasets:[{ label:'Temperature (°C)', data:temps, borderColor:'#00796b', fill:false }] }
    });
}

function downloadWeatherPNG() {
    const link = document.createElement('a');
    link.download = 'weather_graph.png';
    link.href = document.getElementById('weatherChart').toDataURL();
    link.click();
}
</script>
</body>
</html>
